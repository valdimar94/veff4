$(function(){"use strict";var a=new window.Game($(".GameCanvas"));a.start()}),window.Controls=function(){"use strict";var a={32:"space",37:"left",38:"up",39:"right",40:"down",77:"m"},b=function(){this._didJump=!1,this._muteSounds=!1,this.keys={},$(window).on("keydown",this._onKeyDown.bind(this)).on("keyup",this._onKeyUp.bind(this)).on("click",this._onKeyDown.bind(this))};return b.prototype._onKeyDown=function(b){if((32===b.keyCode&&!this.keys.space||"click"===b.type)&&(this._didJump=!0),77===b.keyCode&&(this._muteSounds?this._muteSounds=!1:this._muteSounds=!0),b.keyCode in a){var c=a[b.keyCode];return this.keys[c]=!0,!1}},b.prototype._onKeyUp=function(b){if(b.keyCode in a){var c=document.querySelector("#playerID");c.className="Player";var d=a[b.keyCode];return this.keys[d]=!1,!1}},b.prototype.didJump=function(){var a=this._didJump;return this._didJump=!1,a},b.prototype.isMuted=function(){return this._muteSounds},new b}(),window.Game=function(){"use strict";var a=window.Controls,b=36,c=function(a){this.el=a,this.SoundManager=new window.SoundManager(this),this.player=new window.Player(this.el.find(".Player"),this,this.SoundManager),this.score=0,this.highScore=0,this.meme=new window.Memes(this.el.find(".Memes"),this,0*b),this.meme1=new window.Memes(this.el.find(".Memes1"),this,1*b),this.meme2=new window.Memes(this.el.find(".Memes2"),this,2*b),this.isPlaying=!1,this.onFrame=this.onFrame.bind(this),document.querySelector("#score").innerHTML="Score: "+this.score};return c.prototype.onFrame=function(){function b(){e++,e%=d.length,c.css("background-image",d[e])}if(this.isPlaying){var c=$(".Player"),d=new Array("url(./images/db1.png)","url(./images/db2.png)","url(./images/db3.png)","url(./images/db4.png)"),e=0;setInterval(b,100),a.isMuted()?this.SoundManager.changeVolume(0):this.SoundManager.changeVolume(1);var f=+new Date/1e3,g=f-this.lastFrame;this.lastFrame=f,this.player.onFrame(g),this.meme.onFrame(g),this.meme1.onFrame(g),this.meme2.onFrame(g),window.requestAnimationFrame(this.onFrame)}},c.prototype.start=function(){this.reset(),this.lastFrame=+new Date/1e3,window.requestAnimationFrame(this.onFrame),this.isPlaying=!0},c.prototype.reset=function(){this.score=0,document.querySelector("#score").innerHTML="Score: "+this.score;var a=document.getElementById("bgimage");a&&(a.className="GameCanvas MovingBackground"),this.SoundManager.gameSound(),this.player.reset(),this.meme.reset(),this.meme1.reset(),this.meme2.reset()},c.prototype.gameover=function(){this.highScore<this.score&&(this.highScore=this.score),document.querySelector(".score").innerHTML="Score: "+this.score,document.querySelector(".highscore").innerHTML="High Score: "+this.highScore;var a=document.getElementById("bgimage");a&&(a.className+=a.className+" PausedBackground"),this.isPlaying=!1,this.SoundManager.menuSound();var b=this,c=this.el.find(".Scoreboard");c.addClass("is-visible").find(".Scoreboard-restart").one("click",function(){c.removeClass("is-visible"),b.start()})},c.prototype.WORLD_WIDTH=102.4,c.prototype.WORLD_HEIGHT=57.6,c}(),window.Player=function(){"use strict";var a=window.Controls,b=5,c=5,d=20,e=25,f=200,g=function(a,b,c){this.el=a,this.game=b,this.pos={x:0,y:0},this.soundManager=c,this.jumping=!1,this.jumpTime=null,this.fallingSpeed=0,this.rotation=0};return g.prototype.reset=function(){this.pos.x=d,this.pos.y=e,this.rotation=0,this.fallingSpeed=0,this.jumping=!1,this.jumpTime=null},g.prototype.onFrame=function(b){if(a.didJump())this.soundManager.flapSound(),this.jumping=!0,this.jumpTime=new Date/1e3,this.fallingSpeed=-(f/4),this.rotation=-20;else{var c=new Date/1e3;c-this.jumpTime>.2&&(this.rotation=0)}this.pos.y+=b*this.fallingSpeed,this.fallingSpeed+=b*f,this.fallingSpeed>60?this.rotation=55:this.fallingSpeed>50?this.rotation=48:this.fallingSpeed>40?this.rotation=40:this.fallingSpeed>30?this.rotation=30:this.fallingSpeed>20&&(this.rotation=20),this.checkCollisionWithBounds(),this.el.css("transform","translateZ(0) translate("+this.pos.x+"em, "+this.pos.y+"em) rotate("+this.rotation+"deg)")},g.prototype.checkCollisionWithBounds=function(){return this.pos.x<0||this.pos.x+b>this.game.WORLD_WIDTH||this.pos.y<0||this.pos.y+c>this.game.WORLD_HEIGHT||this.normie()?this.game.gameover():void(this.escapedMemes()&&(this.game.score++,document.querySelector("#score").innerHTML="Score: "+this.game.score))},g.prototype.normie=function(){return this.pos.x>this.game.meme.pos.x&&this.pos.x<this.game.meme.pos.x+9&&(this.pos.y<this.game.meme.pos.y+37||this.pos.y>this.game.meme.pos.y+50)||this.pos.x>this.game.meme1.pos.x&&this.pos.x<this.game.meme1.pos.x+9&&(this.pos.y<this.game.meme1.pos.y+37||this.pos.y>this.game.meme1.pos.y+50)||this.pos.x>this.game.meme2.pos.x&&this.pos.x<this.game.meme2.pos.x+9&&(this.pos.y<this.game.meme2.pos.y+37||this.pos.y>this.game.meme2.pos.y+50)},g.prototype.escapedMemes=function(){return this.pos.x>this.game.meme.pos.x+9&&this.pos.x<this.game.meme.pos.x+10||this.pos.x>this.game.meme1.pos.x+9&&this.pos.x<this.game.meme1.pos.x+10||this.pos.x>this.game.meme2.pos.x+9&&this.pos.x<this.game.meme2.pos.x+10},g}(),window.requestAnimationFrame||(window.requestAnimationFrame=function(){"use strict";return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(a){window.setTimeout(a,1e3/60)}}()),window.Memes=function(){"use strict";var a=30,b=102,c=0,d=function(a,d,e){this.el=a,this.game=d,this.offset=e,this.pos={x:b,y:c}};return d.prototype.reset=function(){this.pos.x=b+this.offset,this.pos.y=Math.floor(-35*Math.random())},d.prototype.onFrame=function(c){this.pos.x-=c*a+.25,this.pos.x<-10&&(this.pos.x=b,this.pos.y=Math.floor(-35*Math.random())),this.el.css("transform","translateZ(0) translate("+this.pos.x+"em, "+this.pos.y+"em)")},d}(),window.SoundManager=function(){"use strict";var a=function(a){this.game=a,this.volume=1,this.gameSoundtrack=document.createElement("audio"),this.toastyWhoopsie=document.createElement("audio"),this.wrongNeighborhood=document.createElement("audio"),this.flapSoundEffect=document.createElement("audio")};return a.prototype.gameSound=function(){this.gameSoundtrack.src="../sounds/spongebobu.mp3",this.wrongNeighborhood.pause(),4!==this.gameSoundtrack.readyState&&this.gameSoundtrack.load(),this.gameSoundtrack.play()},a.prototype.flapSound=function(){this.flapSoundEffect.src="../sounds/fart.wav",4!==this.flapSoundEffect.readyState&&this.flapSoundEffect.load(),this.flapSoundEffect.play()},a.prototype.menuSound=function(){this.toastyWhoopsie.src="../sounds/toasty.mp3",this.gameSoundtrack.pause(),4!==this.toastyWhoopsie.readyState&&this.toastyWhoopsie.load(),this.toastyWhoopsie.play(),this.wrongNeighborhood.src="../sounds/wrong.mp3",4!==this.wrongNeighborhood.readyState&&this.wrongNeighborhood.load(),this.wrongNeighborhood.play()},a.prototype.changeVolume=function(a){this.volume=a,this.gameSoundtrack.volume=this.volume,this.wrongNeighborhood.volume=this.volume,this.toastyWhoopsie.volume=this.volume,this.flapSoundEffect.volume=this.volume},a}();